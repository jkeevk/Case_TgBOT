# Кейс «Разработка телеграм бота с редактированием изображений»
<img src="/static/cat_before.jpg" width=25% /> <img src="/static/cat_after.jpg" width=25% /><br /><br />

Проект посвящен разработке интерактивного Telegram-бота, который обрабатывает фотографии и сохраняет их в локальном хранилище. Бот запрашивает у пользователя фотографию, накладывает на неё случайное приятное сообщение из заранее подготовленного списка, а затем задает вопрос о пересылке готовой фотографии конкретному пользователю или в группу в Telegram.

## Общая структура проекта

* [bot.py](bot.py) - основной модуль программы, который запускает бота и управляет его логикой. Этот файл связывает компоненты проекта и отвечает за обработку команд пользователей, организацию диалогов, создание и сохранение фотографий.

* [add_text.py](add_text.py) - модуль для получения случайных приятных сообщений и добавления их на фотографии с помощью библиотеки Python Pillow (PIL).

* [captions.txt](captions.txt) - файл с приятными фразами для дальнейшего использования в программе.

* [Dockerfile](Dockerfile) - файл, содержащий инструкции по созданию Docker-образа для запуска бота с нужными зависимостями.

* [settings.ini](settings.ini) - файл настроек для работы с API Telegram, содержит токен бота, имя папки для сохранения фотографий и ID пользователя или группы для пересылки фотографий.

* [requirements.txt](requirements.txt) - список всех зависимостей и их версий, необходимых для работы проекта, упрощает настройку рабочей среды для разработчиков.

* [README.md](README.md) - этот документ, содержащий основную информацию о проекте, инструкции по установке, запуску и использованию бота, а также советы по взаимодействию с ним.

* [/static/](/static/) - каталог, содержащий вспомогательные ресурсы, такие как примеры изображений, получаемых в процессе работы бота.

* [/fonts/](/fonts/) - каталог, содержащий нестандартные шрифты для лучшего отражения изображения.



* Документационные строки (docstrings) в каждом модуле предоставляют более детальную информацию о классах, методах и способах взаимодействия с программой, что способствует лучшему пониманию её структуры.

## Порядок запуска

#### Убедитесь, что заполнены данные в settings.ini, создан бот (https://t.me/botfather), и установлены все зависимости!

1. По желанию, заполните файл captions.txt:
- Содержит 20 стандартных фраз, по одной на каждой строке.

2. Запустите bot.py:
- Основной модуль программы, который инициирует работу бота.

3. Бот готов к работе!
- Теперь вы можете взаимодействовать с ботом для генерации красивых изображений.

## Основная логика работы бота:

1. Первый запуск:
- При первом запуске бот приветствует пользователя и предлагает ознакомиться с правилами. Бот готов к приему фотографий.

2. Отправка фотографии:
- Бот проверяет наличие каталога для будущих фотографий и сохраняет фотографию в формате «YYYY-MM-DD_HH:mm_user_id.jpg», где:
- YYYY — год (четыре знака),
- MM — месяц (два знака),
- DD — день (два знака),
- HH — часы (24-часовой формат, два знака),
- mm — минуты (два знака),
- user_id — ID пользователя, приславшего фото.

3. Подбор подписи:
- Случайно выбирается фраза из файла captions.txt, которая накладывается на исходную фотографию с помощью библиотеки PIL.

4. Дальнейший выбор:
- Пользователю задается вопрос о необходимости переслать обработанную фотографию в группу Telegram или конкретному пользователю (ID указан в файле settings.ini).

5. Успех!
- Фотография успешно обработана, и бот готов к новой работе!
